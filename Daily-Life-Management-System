#include <bits/stdc++.h>
//#include <ctime>
using namespace std;
struct taskStore{
    int startHr;
    int startMn;
    int endHr;
    int endMn;
    string taskName;
};
deque<taskStore>task;
void printTask(){
  for(int i=0;i<task.size();i++){
    cout<<"TASK NO "<<i+1<<":\n";
    cout<<task[i].taskName<<"\n";
    cout<<"Start at: "<<task[i].startHr<<" : "<<task[i].startMn<<" \nEnd at:  "<<task[i].endHr<<" : "<<task[i].endMn<<" \n";
  }
}
void deleteTask(){
  int no=0;
  cout<<"Are you sure to delete any task? type 1 for delete,0 oterwise:\n";
  cin>>no;
  if(no==0)return;
  printTask();

  cout<<"Which task would you delete?Please type the task no:  \n";
  int taskNo;
  cin>>taskNo;
  task.erase(task.begin()+taskNo-1);
  cout<<"Task "<<taskNo<<" is deleted\n";
}


void taskInput(){
  //int size=task.size();

  taskStore newnode;
     task.push_back(newnode);

  // task.resize(size+1);
   int size=task.size();

  cout<<"type start hour and min with a space (like 11 35):\n";
    cin>>task[size-1].startHr>>task[size-1].startMn;

  cout<<"type end hour and min with a space:\n";
    cin>>task[size-1].endHr>>task[size-1].endMn;
  cout<<"what task will you do:\n";
    cin>>task[size-1].taskName;
    cout<<"Task is successfully added.\n";
}

void specificTaskT(){
    time_t now = time(0); // Get the current time as a time_t value
    tm* local_time = localtime(&now); // Convert time_t to tm struct for local time

    int hour = local_time->tm_hour;
    int minute = local_time->tm_min;
    //int second = local_time->tm_sec;
    bool flag=true;
    for(int i=0;i<task.size();i++){

      if(hour>=task[i].startHr&&hour<=task[i].endHr){
       
        if(hour==task[i].startHr&&minute<task[i].startMn)continue;
     
        if(hour==task[i].endHr&&minute>task[i].endMn)continue;
       
        cout<<"Your task:\n";
        cout<<task[i].taskName<<"\n";
        flag=false;
        break;
      }
    }
    if(flag){
      cout<<"NO Task Here!\n";
    }
       
}
int main(){
  bool go;
  do{
     go=true;
     specificTaskT();
     cout<<"Type 1 for adding task.\n";
     cout<<"Type 2 for show all task.\n";
     cout<<"Type 3 for delete a task.\n";
     cout<<"Type 4 for delete all task.\n";
     cout<<"Type 0 for terminate program.\n";
     int command=0;
     cin>>command;
     switch(command){
      case 1 :taskInput();
              break;
      case 2 :printTask();
              break;
      case 3 :deleteTask();
              break;
      case 4 ://deleteAll();
              break;
      case 0 :go=false;
              break;
      default :cout<<"Invalid input\n";
               break;
     }
     
  }
  while(go);
    
  return 0;
}
